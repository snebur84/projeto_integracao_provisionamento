{% extends "core/base.html" %}

{% block title %}Importar Template{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Importar Template (XML / CFG)</h1>
    <a class="btn btn-outline-secondary" href="{% url 'core:template_list' %}">Voltar à lista</a>
  </div>

  {% if messages %}
    {% for msg in messages %}
      <div class="alert {% if msg.tags %}alert-{{ msg.tags }}{% else %}alert-info{% endif %}">{{ msg }}</div>
    {% endfor %}
  {% endif %}

  <div class="card">
    <div class="card-body">
      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <div class="mb-3">
          <label for="id_name" class="form-label">Nome do template (chave)</label>
          <input id="id_name" name="name" class="form-control" type="text" value="{{ name|default:'' }}" required>
          <div class="form-text">Nome único que será usado como chave (id) no MongoDB.</div>
        </div>

        <div class="mb-3">
          <label for="id_file" class="form-label">Arquivo (.xml ou .cfg)</label>
          <input id="id_file" name="file" class="form-control" type="file" accept=".xml,.cfg" required>
        </div>

        <div class="form-check mb-3">
          <input id="id_overwrite" name="overwrite" class="form-check-input" type="checkbox" {% if request.POST.overwrite %}checked{% endif %}>
          <label for="id_overwrite" class="form-check-label">Sobrescrever se já existir</label>
        </div>

        <div class="d-flex gap-2">
          <button class="btn btn-primary" type="submit">Importar</button>
          <a class="btn btn-secondary" href="{% url 'core:template_list' %}">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}